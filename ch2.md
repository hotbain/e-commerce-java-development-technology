SOA服务化
---------------------

什么是服务化?我简单的理解成就是一个服务去通过网络调用触发另一个服务。
为什么会引入服务化? 如果项目业务模不多或者业务单一的话，搞SOA确实是没有多大的必要.产品和业务是朝前发展的，如果业务模块增多，访问量增大，那么维护成本是非常大的，代码臃肿不堪，所有的人都在一个项目里进行开发，那么团队成员之间的很容易出现问题.但是如果按照业务模块进行划分，并对外暴露自己的接口的话，每一个小的团队维护一个业务模块，那么不同成员间仅仅维护好自己的模块即可，发生变化仅仅是接口。别的地方不需要发生太大的变化。

SOA优点:


技术
-------
这一节主要讲解实现SOA方式有哪几种，以及对应的优缺点是什么？更具我自己个人的经历，现在列举如下：

1. HTTP接口暴露-接口维护者暴露参数和以及返回结果定义.
1. TCP接口暴露--定义message格式，在服务端处理完成后，将result发送到接收端即可。
1. 消息系统暴露-对于这种对主流程影响的不大的业务不较适合这种接口暴露形式.

其实无论接口的调用实现形式是怎样的，这其中都要考虑服务的可用性以及拓展性，伸缩性，安全性,可重用性。并且每一种实现形式最终都会定义接口和参数以及希望返回的数据格式，以及粒度的选择。

基本的接口暴露方式：
服务端定义接口名称,参数名称及类型,以及版本，支持的返回数据类型，以及通信方式。
客户端业务模块都是按照服务端给出的定义，访问服务端的接口。

如果在访问的过程中出现了问题，例如网络中断，是放弃还是重启其它机器(处于同一个服务集群中)，怎样访问其它机器，是随机分配还是根据服务提供方的压力，怎样去收集服务提供方的访问压力，都是需要我们去在设计服务化的时候需要考虑的问题，这样才能够保证我们服务的可用性。伸缩性当然是根据线上的访问压力动态的调整服务提供的部署机器的个数，按需分配是必然的趋势，这也是现在很多容器技术例如docker,KVM大行其道的原因.保证可伸缩性的前提是我们要有这种动态增删机器的能力，怎样具有这种能力，直接买硬件吗?成本太高!!!那就不得不用软件去动态的根据需求在性能高的机器上去划分出必须的资源其完成机器的分配，虚拟化是服务化的基础。

服务化进化的过程中，一个接口的访问地址期初都是几个用逗号隔开的地址列表，访问方根据自己的需要根据权重或者平均分配的原则，选择一个访问地址，进行访问。但是随着访问量的怎样，添加服务机器的个数，服务访问地址列表也在不断增长，这时就很难维护了。任何一个问题都可以通过一个中间层完成。那么我们这时就希望有个服务注册与发现中间件来完成服务的注册和发现，当然了，如果能够提供一些其他功能那是最好了，例如访问压力的收集，服务提供方的定时心跳检测等功能。

这一章我们就从SOA从初期发展到虚拟化服务化的进展做一个描述,以及实现起来有什么需要注意的地方都会进行描述.

起航
------------------------


